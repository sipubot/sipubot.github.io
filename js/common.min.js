var SIPUCOMMON=function(n,l,u){function e(a){var b=a.BASE_URL||"https://sipu.iptime.org",d=a.ADD_URL||"",c=a.rqMethod||"POST",m=a.rqContentType||"application/json",g=a.rsContentType||"json",f="function"===typeof a.rqData?a.rqData():a.rqData,k="",e=a.rsFunc||function(a){console.log(a)};b+=d;d=new Headers;d.append("Content-Type",m);m=JSON.stringify(f);d={method:c,headers:d,credentials:"include",mode:"cors",cache:"default"};"GET"!==c&&(d.body=m);fetch(b,d).then(function(a){a.ok?"POST"===c?a.json().then(function(a){e([f,
a])}):"blob"===g?a.blob().then(function(a){k=a;e(k)}):"json"===g?a.json().then(function(a){k=a;e(k)}):"text"===g&&a.text().then(function(a){k=a;e(k)}):(console.log("request fail"),console.log(f,a.text()))})["catch"](function(b){console.log(f);console.log(a);console.log("There has been a problem with your fetch operation: "+b.message)})}function q(){Object.entries(h).map(function(a){a.doOnload?e(a[1]):a[1].init()})}function p(a,b){return 1===b?a.split(""):a.match(new RegExp(".{1,"+b+"}","g"))}function r(){function a(a){var d=
(new Date).getDay();if(0<d&&5>=d)switch(!0){case 7>a:return b++,b+" sheep... zzZ";case 18>a&&7<=a:return b=0,"Mining Coin";case 18<=a&&21>a:return"Exercise";case 21<=a:return"FreeTime on Week!"}else switch(!0){case 7>a:return b++,b+" sheep... zzZ";case 7<=a:return b=0,"Weekend Plan!"}}var b=0,d=l('P[data-custom="LiveTime"]'),c=l('SPAN[data-custom="LiveOn"]');l('IMG[data-custom="LiveOn"]').src=function(a){var b=(new Date).getDay();if(0<b&&5>=b)switch(!0){case 7>a:return"https://66.media.tumblr.com/b7aafe176884b49659af62347d1e4571/tumblr_pskw2aOJMP1s8funmo1_250.jpg";
case 18>a&&7<=a:return"https://66.media.tumblr.com/b7aafe176884b49659af62347d1e4571/tumblr_pskw2aOJMP1s8funmo1_250.jpg";case 18<=a&&21>a:return"https://66.media.tumblr.com/b7aafe176884b49659af62347d1e4571/tumblr_pskw2aOJMP1s8funmo1_250.jpg";case 21<=a:return"https://66.media.tumblr.com/b7aafe176884b49659af62347d1e4571/tumblr_pskw2aOJMP1s8funmo1_250.jpg"}else switch(!0){case 7>a:return"https://66.media.tumblr.com/b7aafe176884b49659af62347d1e4571/tumblr_pskw2aOJMP1s8funmo1_250.jpg";case 7<=a:return"https://66.media.tumblr.com/b7aafe176884b49659af62347d1e4571/tumblr_pskw2aOJMP1s8funmo1_250.jpg"}}((new Date).getUTCHours());
setInterval(function(){var b=new Date-new Date("2015-01-01"),g=(new Date).getUTCHours();g=-1<g&&14>g?g+9:g-15;d.html(1089658152+Math.floor(b/1E3));c.html(a(g))},1E3)}function t(a){var b=["icon/sipu_sad.png","icon/sipu_nom.png","icon/sipu_hap.png"],d=["red","grey","green"];console.log(a);var c=[50,30,20].map(function(b,d){return 30<a[a.length-d-1].wa_point-a[a.length-d-2].wa_point?b:0}).reduce(function(a,b){return a+b},0);return[{image:b[Math.round(c/53)],imoji:"\ud83d\udcbb",color:d[Math.round(c/
53)]},{image:b[Math.round(+a[a.length-1].pa_point/53)],imoji:"\ud83c\udfad",color:d[Math.round(+a[a.length-1].pa_point/53)]},{image:b[1],imoji:"\ud83c\udfc3",color:d[1]}]}var c={init:function(){for(var a=document.getElementsByTagName("*"),b,d=0;d<a.length;d++)if(a[d].hasAttribute("data-node")||null!==a[d].getAttribute("data-node")){if(1>a[d].getAttribute("data-node").length)break;b=a[d].getAttribute("data-node");if(1>b.indexOf("-")){console.log("data node Error");console.log(a[d]);break}b=b.split("-");
c[b[0]]||(c[b[0]]={});c[b[0]][b[1]]=a[d]}},log:function(){console.log(this)}};c.init();var f={isHTML:function(a){try{if(a instanceof HTMLElement)return!0;console.log("not a elements")}catch(b){console.log(b)}return!1},setNodeValue:function(a,b,d,c){try{if(f.isHTML(a)){c&&(a.innerHTML="");var e="";"object"===typeof d||Array.isArray(d)||(d=[]);Array.isArray(d)||(d=[d]);e=d.reduce(function(a,d){var c="";c=f.isHTML(b)?b.cloneNode(!0).innerHTML:b;Object.entries(d).map(function(a){c=c.replace("{"+a[0]+
"}",a[1])});return a+c},"");a.innerHTML+=e}}catch(g){console.log(a,b,d,c,g)}},getNodeValue:function(a){if(f.isHTML(a)){if("INPUT"==a.tagName||"TEXTAREA"==a.tagName)return a.value;if("SELECT"==a.tagName)return a[a.selectedIndex].value;console.log("some thing Wrong");return!1}},setEvent:function(a,b){f.isHTML(a)&&"function"===typeof b&&(a.addEventListener("click",b,!1),a.addEventListener("touchstart",b,!1))}},h={LOGIN:{ADD_URL:"/login",rqData:function(){return{email:c.LOGIN.getemail.value,password:CryptoJS.SHA3(c.LOGIN.getpassword.value,
{outputLength:512}).toString()}},rsFunc:function(a){a[1].result&&"SUCCESS"===a[1].result&&l("#login-modal").modal("toggle")},doOnload:!1,init:function(){f.setEvent(c.LOGIN.summit,function(){e(h.LOGIN)})}},LOGOUT:{ADD_URL:"/logout",rqMethod:"GET",rsFunc:function(){},doOnload:!1,init:function(){f.setEvent(c.LOGOUT.summit,function(){e(h.LOGOUT)})}},QUTSET:{ADD_URL:"/qut",rqMethod:"POST",rqData:function(){return{message:f.getNodeValue(c.QUT.sendmessage)}},rsFunc:function(a){c.QUT.sendmessage.value="";
a=c.QUT.sendmessage;var b=10>a.length?1:.1*a.length;b=Math.floor(b);a=p(a,b);a=a.map(function(a){return"<span>"+a+"</span>"}).join("");c.QUT.setul.innerHTML+='<li class="list-group-item"><h4>'+a+"</h4></li>"},doOnload:!1,init:function(){f.setEvent(c.QUT.summit,function(){e(h.QUTSET)})}},QUTGET:{ADD_URL:"/qut",rqMethod:"GET",rsFunc:function(a){c.QUT.sendmessage.value="";a.map(function(a){a=a.message;var b=10>a.length?1:.1*a.length;b=Math.floor(b);a=p(a,b);a=a.map(function(a){return"<span>"+a+"</span>"}).join("");
c.QUT.setul.innerHTML+='<li class="list-group-item"><h4>'+a+"</h4></li>"})},doOnload:!0,init:function(){e(h.QUTGET)}},LINK:{BASE_URL:"/data/link.json",rqMethod:"GET",rsFunc:function(a){f.setNodeValue(c.LINK.setul,c.LINK.template,a,!0)},doOnload:!0,init:function(){e(h.LINK)}},APP:{BASE_URL:"/data/app.json",rqMethod:"GET",rsFunc:function(a){f.setNodeValue(c.APP.setul,c.APP.template,a,!0)},doOnload:!0,init:function(){e(h.APP)}},STAT:{BASE_URL:"/data/persondata.json",rqMethod:"GET",rsFunc:function(a){a=
t(a);f.setNodeValue(c.STAT.ul,c.STAT.template,a,!0)},doOnload:!1,init:function(){e(h.STAT)}}};n.run=function(){q();r();Snail.start()};return n}(window.SIPUCOMMON||{},jQuery);SIPUCOMMON.run();
