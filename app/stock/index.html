<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>시퍼렁어</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      rel="icon"
      type="image/x-icon"
      href="https://sipubot.github.io/icon/favicon.ico"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://sipubot.github.io/icon/favicon.ico"
    />
    <link
      href="http://ajax.aspnetcdn.com/ajax/bootstrap/4.2.1/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/app/issue/stylesheets/common.min.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      /* 필터 버튼 네비게이션 */
      nav ul {
        list-style: none;
        padding: 10px;
        margin: 0;
        display: flex;
        gap: 5px;
        border-bottom: 1px solid #333;
      }

      .filter-btn {
        background-color: #222;
        color: #777;
        border: 1px solid #444;
        padding: 8px 20px;
        cursor: pointer;
        font-weight: bold;
        text-transform: uppercase;
        transition: all 0.2s;
        border-radius: 0 !important;
        font-size: 12px !important;
      }

      .filter-btn:hover {
        background-color: #333;
        color: #ccc;
      }

      .filter-btn.active {
        background-color: #444 !important;
        color: #fff !important;
        border-color: #888;
        box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5);
      }

      /* 차트 레이블 & 범례 */
      .chart-label {
        font-size: 10px;
        color: #888;
        margin-bottom: 5px;
      }

      .chart-legend {
        display: flex;
        gap: 15px;
        font-size: 11px;
        color: #888;
        margin-bottom: 10px;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .legend-color {
        width: 10px;
        height: 10px;
        border-radius: 2px;
      }

      /* 모달 커스텀 스타일 */
      #detail-modal .modal-content {
        background: #111;
        border: 1px solid #333;
        border-radius: 0;
        max-height: 90vh;
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      #detail-modal .modal-header {
        border-bottom: 1px solid #333;
        padding: 1.5rem;
      }

      #detail-modal .modal-body {
        overflow-y: auto;
        padding: 1.5rem;
        flex: 1;
      }

      #detail-modal .modal-backdrop {
        background: rgba(0, 0, 0, 0.9);
      }

      /* 기간 버튼 */
      .period-btn {
        background: #222;
        color: #777;
        border: 1px solid #444;
        padding: 3px 10px;
        font-size: 11px;
        cursor: pointer;
        border-radius: 0;
      }

      .period-btn.active {
        background: #444;
        color: #fff;
        border-color: #888;
      }
    </style>
  </head>

  <body>
    <div class="main-container">
      <nav>
        <ul>
          <li>
            <button
              onclick="SIPUSTOCK.FILTER('ALL', this)"
              class="filter-btn active"
              title="ALL"
            >
              <i class="fa fa-border-all fa-2x"></i>
            </button>
          </li>
          <li>
            <button
              onclick="SIPUSTOCK.FILTER('DIVERGENCE', this)"
              class="filter-btn"
              title="DIVERGENCE"
            >
              <i class="fa-solid fa-explosion fa-2x"></i>
            </button>
          </li>
          <li>
            <button
              onclick="SIPUSTOCK.FILTER('HOT', this)"
              class="filter-btn"
              title="HOT"
            >
              <i class="fa fa-fire fa-2x"></i>
            </button>
          </li>
          <li>
            <button
              onclick="SIPUSTOCK.FILTER('STABLE', this)"
              class="filter-btn"
              title="NORMAL"
            >
              <i class="fa fa-heart-pulse fa-2x"></i>
            </button>
          </li>
          <li>
            <button
              onclick="SIPUSTOCK.FILTER('COLD', this)"
              class="filter-btn"
              title="COLD"
            >
              <i class="fa fa-cloud-rain fa-2x"></i>
            </button>
          </li>
          <li>
            <button
              onclick="SIPUSTOCK.FILTER('FREEZE', this)"
              class="filter-btn"
              title="FREEZE"
            >
              <i class="fa fa-snowman fa-2x"></i>
            </button>
          </li>
          <li>
            <button
              onclick="SIPUSTOCK.FILTER('HIGH_MOMENTUM', this)"
              class="filter-btn"
              title="HIGH MOMENTUM"
            >
              <i class="fa-solid fa-rocket fa-2x"></i>
            </button>
          </li>
        </ul>
      </nav>

      <div class="container-fluid p-0">
        <table class="table table-striped table-dark m-0">
          <thead>
            <tr>
              <th>TICKER</th>
              <th>PRICE</th>
              <th class="text-center">STATUS</th>
              <th class="text-center">SIGNAL</th>
              <th>SCORE</th>
              <th class="text-center" title="News Sentiment Trend">NEWS</th>
              <th class="text-center" title="Market Momentum Power">POWER</th>
              <th>VIEW</th>
            </tr>
          </thead>
          <tbody id="list_stock"></tbody>
        </table>
      </div>
    </div>

    <!-- Bootstrap 4 Modal -->
    <div
      class="modal fade"
      id="detail-modal"
      tabindex="-1"
      role="dialog"
      aria-hidden="true"
    >
      <div
        class="modal-dialog modal-lg"
        role="document"
        style="max-width: 580px"
      >
        <div class="modal-content">
          <div class="modal-header">
            <div class="d-flex align-items-center">
              <h2
                id="modal-ticker"
                class="font-italic font-weight-bold text-uppercase m-0 mr-3"
              >
                MORE
              </h2>
              <a
                id="yahoo-link"
                href="#"
                target="_blank"
                style="color: #6600cc"
                title="Yahoo Finance"
              >
                <i class="fa-solid fa-arrow-up-right-from-square"></i>
              </a>
            </div>
            <button
              type="button"
              class="btn btn-sm btn-outline-secondary"
              onclick="SIPUSTOCK.closeModal()"
              style="border-radius: 0"
            >
              CLOSE
            </button>
          </div>
          <div class="modal-body">
            <div class="row mb-4">
              <div class="col-6">
                <p class="m-0 text-muted">PRICE</p>
                <h3 id="modal-price" class="m-0">$0.00</h3>
              </div>
              <div class="col-6 text-right">
                <p class="m-0 text-muted">SCORE</p>
                <h3 id="modal-score" class="m-0">0.0</h3>
              </div>
            </div>

            <div class="d-flex mb-2" style="gap: 6px">
              <button
                onclick="SIPUSTOCK.CHANGE_PERIOD('recent')"
                class="period-btn active"
              >
                RECENT
              </button>
              <button
                onclick="SIPUSTOCK.CHANGE_PERIOD('summary')"
                class="period-btn"
              >
                DAY
              </button>
              <button
                onclick="SIPUSTOCK.CHANGE_PERIOD('month_summary')"
                class="period-btn"
              >
                MON
              </button>
              <button
                onclick="SIPUSTOCK.CHANGE_PERIOD('year_summary')"
                class="period-btn"
              >
                YEAR
              </button>
            </div>

            <!-- 상단 차트: 가격/스코어 + 거래량 -->
            <div
              style="
                height: 180px;
                background: #000;
                border: 1px solid #333;
                padding: 10px 15px 5px 15px;
                position: relative;
                margin-bottom: 16px;
              "
            >
              <div class="chart-label">가격/스코어 + 거래량</div>
              <div class="chart-legend">
                <div class="legend-item">
                  <div class="legend-color" style="background: #fff"></div>
                  가격
                </div>
                <div class="legend-item">
                  <div class="legend-color" style="background: #007bff"></div>
                  스코어
                </div>
                <div class="legend-item">
                  <div
                    class="legend-color"
                    style="background: linear-gradient(90deg, #28a745, #dc3545)"
                  ></div>
                  거래량
                </div>
              </div>
              <canvas
                id="mainChart"
                style="width: 100% !important; height: 130px !important"
              ></canvas>
            </div>

            <!-- 하단 차트: 소셜 분석 -->
            <div
              style="
                height: 180px;
                background: #000;
                border: 1px solid #333;
                padding: 10px 15px 5px 15px;
                position: relative;
                margin-bottom: 16px;
              "
            >
              <div class="chart-label">소셜 활동 + 감성 분석</div>
              <div class="chart-legend">
                <div class="legend-item">
                  <div class="legend-color" style="background: #ffc107"></div>
                  Social Activity
                </div>
                <div class="legend-item">
                  <div
                    class="legend-color"
                    style="background: linear-gradient(90deg, #28a745, #dc3545)"
                  ></div>
                  Sentiment
                </div>
              </div>
              <canvas
                id="socialChart"
                style="width: 100% !important; height: 130px !important"
              ></canvas>
            </div>

            <div
              id="social-feed"
              style="font-size: 12px; margin-top: 15px"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.slim.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/bootstrap/4.2.1/bootstrap.min.js"></script>
    <script src="./stock/stock.js"></script>
  </body>
</html>
