var SipuBudget=function(p,c,C){function A(){c(b.Button.cancel).click(function(){window.history.back()});c(b.ButtonDay.Income).click(function(){r(b.Modal.ModalSubmitIncome,b.ButtonDay.Income)});c(b.ButtonDay.Expense).click(function(){r(b.Modal.ModalSubmitExpense,b.ButtonDay.Expense)});c(b.ButtonDay.Transfer).click(function(){r(b.Modal.ModalSubmitTransfer,b.ButtonDay.Transfer)});c(b.ButtonSet.Account).click(function(){y(b.Div.SetAccount,b.ButtonSet.Account);m(b.ButtonSet.Account)});c(b.ButtonSet.Tax).click(function(){y(b.Div.SetTax,
b.ButtonSet.Tax)});c(b.ButtonSet.TaxLet).click(function(){r(b.Modal.ModalSubmitTax,b.ButtonSet.TaxLet)});c(b.Input.DayDay).datepicker();c(b.Input.DayDay).datepicker("option","dateFormat","yy-mm-dd");c(b.Input.ModalIncomeDay).datepicker();c(b.Input.ModalIncomeDay).datepicker("option","dateFormat","yy-mm-dd");c(b.Input.ModalExpenseDay).datepicker();c(b.Input.ModalExpenseDay).datepicker("option","dateFormat","yy-mm-dd");c(b.Input.ModalTransferDay).datepicker();c(b.Input.ModalTransferDay).datepicker("option",
"dateFormat","yy-mm-dd");c(b.ButtonDay.Search).click(function(){m(b.ButtonDay.Search)});Object.keys(b).map(function(a){"ButtonSum"!==a&&"ButtonStat"!==a&&"ButtonModal"!==a||Object.keys(b[a]).map(function(d){c(b[a][d]).click(function(){m(b[a][d])})})});c(b.Input.DayDay).keydown(function(a){13==a.which&&m(b.ButtonDay.Search)});c(b.Input.ModalIncomeQt).keydown(function(a){13==a.which&&m(b.ButtonModal.SubmitIncome)});c(b.Input.ModalExpenseQt).keydown(function(a){13==a.which&&m(b.ButtonModal.SubmitExpense)});
c(b.Input.ModalTransferQt).keydown(function(a){13==a.which&&m(b.ButtonModal.SubmitTransfer)});c(b.Input.ModalAccountQt).keydown(function(a){13==a.which&&m(b.ButtonModal.SubmitAccount)});c(b.Input.ModalTaxQt).keydown(function(a){13==a.which&&m(b.ButtonModal.SubmitTax)});c(b.Select.StatCategory).change(function(){B(a.DVal.ClickStatButton)})}function y(a,d){c(b.Div.SetAccount).hide();c(b.Div.SetTax).hide();c(a).show()}function r(a,c){switch(c){case b.ButtonDay.Income:m(b.ButtonDay.Income);break;case b.ButtonDay.Expense:m(b.ButtonDay.Expense);
break;case b.ButtonDay.Transfer:m(b.ButtonDay.Transfer)}window.location.href=a}function m(f){switch(f){case b.ButtonDay.Income:a.DVal.ClickDayButton=b.ButtonDay.Income;f={RQ:a.ajaxMode.ListModalCategory,VALUE:a.ajaxVal.Income};g(a.ajaxLink.Select,f,a.ajaxMode.ListModalCategory,h);f={RQ:a.ajaxMode.ListModalAccount};g(a.ajaxLink.Select,f,a.ajaxMode.ListModalAccount,h);break;case b.ButtonDay.Expense:a.DVal.ClickDayButton=b.ButtonDay.Expense;f={RQ:a.ajaxMode.ListModalCategory,VALUE:a.ajaxVal.Expense};
g(a.ajaxLink.Select,f,a.ajaxMode.ListModalCategory,h);f={RQ:a.ajaxMode.ListModalAccount};g(a.ajaxLink.Select,f,a.ajaxMode.ListModalAccount,h);break;case b.ButtonDay.Transfer:a.DVal.ClickDayButton=b.ButtonDay.Transfer;f={RQ:a.ajaxMode.ListModalAccount};g(a.ajaxLink.Select,f,a.ajaxMode.ListModalAccount,h);break;case b.ButtonDay.Search:f={RQ:a.ajaxMode.ListDayIncome,DATE:c(b.Input.DayDay).val()};g(a.ajaxLink.Select,f,a.ajaxMode.ListDayIncome,h);f={RQ:a.ajaxMode.ListDayExpense,DATE:c(b.Input.DayDay).val()};
g(a.ajaxLink.Select,f,a.ajaxMode.ListDayExpense,h);break;case b.ButtonSum.Day:a.DVal.ClickSumButton=b.ButtonSum.Day;f={RQ:a.ajaxMode.ListSumDay};g(a.ajaxLink.Select,f,a.ajaxMode.ListSumDay,h);break;case b.ButtonSum.Month:a.DVal.ClickSumButton=b.ButtonSum.Month;f={RQ:a.ajaxMode.ListSumMonth};g(a.ajaxLink.Select,f,a.ajaxMode.ListSumMonth,h);break;case b.ButtonSum.Year:a.DVal.ClickSumButton=b.ButtonSum.Year;f={RQ:a.ajaxMode.ListSumYear};g(a.ajaxLink.Select,f,a.ajaxMode.ListSumYear,h);break;case b.ButtonStat.MonthIncome:a.DVal.ClickStatButton=
b.ButtonStat.MonthIncome;a.DVal.StatSelCateValue=a.DVal.StatAllCateValue;f={RQ:a.ajaxMode.ListModalCategory,VALUE:a.ajaxVal.Income};g(a.ajaxLink.Select,f,a.ajaxMode.ListViewCategory,h);f={RQ:a.ajaxMode.ListStatMonthIncome};g(a.ajaxLink.Select,f,a.ajaxMode.ListStatMonthIncome,h);break;case b.ButtonStat.MonthExpense:a.DVal.ClickStatButton=b.ButtonStat.MonthExpense;a.DVal.StatSelCateValue=a.DVal.StatAllCateValue;f={RQ:a.ajaxMode.ListModalCategory,VALUE:a.ajaxVal.Expense};g(a.ajaxLink.Select,f,a.ajaxMode.ListViewCategory,
h);f={RQ:a.ajaxMode.ListStatMonthExpense};g(a.ajaxLink.Select,f,a.ajaxMode.ListStatMonthExpense,h);break;case b.ButtonStat.YearIncome:a.DVal.ClickStatButton=b.ButtonStat.YearIncome;a.DVal.StatSelCateValue=a.DVal.StatAllCateValue;f={RQ:a.ajaxMode.ListModalCategory,VALUE:a.ajaxVal.Income};g(a.ajaxLink.Select,f,a.ajaxMode.ListViewCategory,h);f={RQ:a.ajaxMode.ListStatYearIncome};g(a.ajaxLink.Select,f,a.ajaxMode.ListStatYearIncome,h);break;case b.ButtonStat.YearExpense:a.DVal.ClickStatButton=b.ButtonStat.YearExpense;
a.DVal.StatSelCateValue=a.DVal.StatAllCateValue;f={RQ:a.ajaxMode.ListModalCategory,VALUE:a.ajaxVal.Expense};g(a.ajaxLink.Select,f,a.ajaxMode.ListViewCategory,h);f={RQ:a.ajaxMode.ListStatYearExpense};g(a.ajaxLink.Select,f,a.ajaxMode.ListStatYearExpense,h);break;case b.ButtonSet.Account:f={RQ:a.ajaxMode.ListSetAccount};g(a.ajaxLink.Select,f,a.ajaxMode.ListSetAccount,h);break;case b.ButtonModal.SubmitIncome:u(b.ButtonModal.SubmitIncome)&&(f={RQ:a.ajaxMode.UpdateDayIncome,DATE:c(b.Input.ModalIncomeDay).val(),
ACCOUNT:c(b.Input.ModalIncomeAccount).val(),CATEGORY:c(b.Input.ModalIncomeCategory).val(),VALUE:c(b.Input.ModalIncomeQt).val()},g(a.ajaxLink.Update,f,a.ajaxMode.UpdateDayIncome,h));break;case b.ButtonModal.SubmitExpense:u(b.ButtonModal.SubmitExpense)&&(f={RQ:a.ajaxMode.UpdateDayExpense,DATE:c(b.Input.ModalExpenseDay).val(),ACCOUNT:c(b.Input.ModalExpenseAccount).val(),CATEGORY:c(b.Input.ModalExpenseCategory).val(),VALUE:c(b.Input.ModalExpenseQt).val()},g(a.ajaxLink.Update,f,a.ajaxMode.UpdateDayExpense,
h));break;case b.ButtonModal.SubmitTransfer:u(b.ButtonModal.SubmitTransfer)&&(f={RQ:a.ajaxMode.UpdateDayTransfer,DATE:c(b.Input.ModalTransferDay).val(),ACCOUNT_FROM:c(b.Input.ModalTransferAccountFrom).val(),ACCOUNT_TO:c(b.Input.ModalTransferAccountTo).val(),VALUE:c(b.Input.ModalTransferQt).val()},g(a.ajaxLink.Update,f,a.ajaxMode.UpdateDayTransfer,h));break;case b.ButtonModal.SubmitAccount:u(b.ButtonModal.SubmitAccount)&&(f={RQ:a.ajaxMode.UpdateSetAccount,VALUE:c(b.Input.ModalAccountQt).val()},g(a.ajaxLink.Update,
f,a.ajaxMode.UpdateSetAccount,h));break;case b.ButtonModal.SubmitTax:u(b.ButtonModal.SubmitTax)&&(f={RQ:a.ajaxMode.ListSetTax,VALUE:c(b.Input.ModalTaxQt).val()},g(a.ajaxLink.Select,f,a.ajaxMode.ListSetTax,h))}}function h(f,d){var k=0,n=0;switch(f){case a.ajaxMode.ListModalCategory:if(a.DVal.ClickDayButton===b.ButtonDay.Income){var e=c(b.Input.ModalIncomeCategory);e.empty();d.map(function(a){c(e).append('<option value="'+a.category_id+'" >'+a.category_name+"</option>")});a.DVal.IncomeCategoryLen=d.length}a.DVal.ClickDayButton===
b.ButtonDay.Expense&&(e=c(b.Input.ModalExpenseCategory),e.empty(),d.map(function(a){c(e).append('<option value="'+a.category_id+'" >'+a.category_name+"</option>")}),a.DVal.ExpenseCategoryLen=d.length);break;case a.ajaxMode.ListModalAccount:a.DVal.ClickDayButton===b.ButtonDay.Income&&(e=c(b.Input.ModalIncomeAccount),e.empty(),d.map(function(a){c(e).append('<option value="'+a.account_id+'" >'+a.account_name+"</option>")}));a.DVal.ClickDayButton===b.ButtonDay.Expense&&(e=c(b.Input.ModalExpenseAccount),
e.empty(),d.map(function(a){c(e).append('<option value="'+a.account_id+'" >'+a.account_name+"</option>")}));a.DVal.ClickDayButton===b.ButtonDay.Transfer&&(e=c(b.Input.ModalTransferAccountFrom),e.empty(),d.map(function(a){c(e).append('<option value="'+a.account_id+'" >'+a.account_name+"</option>")}),e=c(b.Input.ModalTransferAccountTo),e.empty(),d.map(function(a){c(e).append('<option value="'+a.account_id+'" >'+a.account_name+"</option>")}));break;case a.ajaxMode.ListDayIncome:e=c(b.Table.DayIncome).find("tbody");
e.empty();c(e).append("<tr><th>\ub0a0\uc9dc</th><th>\uacc4\uc88c</th><th>\ud56d\ubaa9</th><th>\uc218\uc785</th><th>\uc0ad\uc81c</th></tr>");d.map(function(b){c(e).append("<tr><td>"+b.budget_date+"</td><td>"+b.account_name+"</td><td>"+b.category_name+"</td><td>"+b.income_value+'</td><td><button  class="'+a.Button.DayIncomeDelNodeClassName+'" value="'+b.rowid+'">\uc0ad\uc81c</button></td></tr>')});c(a.Button.DayIncomeDelNodeClass).click(function(){z(c(this))});break;case a.ajaxMode.ListDayExpense:e=
c(b.Table.DayExpense).find("tbody");e.empty();c(e).append("<tr><th>\ub0a0\uc9dc</th><th>\uacc4\uc88c</th><th>\ud56d\ubaa9</th><th>\uc9c0\ucd9c</th><th>\uc0ad\uc81c</th></tr>");d.map(function(b){c(e).append("<tr><td>"+b.budget_date+"</td><td>"+b.account_name+"</td><td>"+b.category_name+"</td><td>"+b.expense_value+'</td><td><button  class="'+a.Button.DayExpenseDelNodeClassName+'" value="'+b.rowid+'">\uc0ad\uc81c</button></td></tr>')});c(a.Button.DayExpenseDelNodeClass).click(function(){z(c(this))});
break;case a.ajaxMode.ListSumDay:e=c(b.Table.Sum).find("tbody");e.empty();c(e).append("<tr><th>\ub0a0\uc9dc</th><th>\uc218\uc775</th><th>\uc9c0\ucd9c</th><th>\uacc4</th></tr>");d.map(function(a){c(e).append("<tr>\t<td>"+a.budget_date+"</td><td>"+a.income_sum+"</td><td>"+a.expense_sum+"</td><td>"+(Number(a.income_sum)-Number(a.expense_sum))+"</td>\t</tr>")});k=(new Date(d[0].budget_date)).getDate();n=d.reduce(function(a,b){return a+ +b.income_sum},0);var t=d.reduce(function(a,b){return a+ +b.expense_sum},
0),g=Math.round(1/k*n),h=Math.round(1/k*t),q=n-t,r=g-h;c(e).append("<tr><th>\uc77c\uacc4</th><th>\ucd1d\uc775</th><th>\ucd1d\uc2e4</th><th>\ucd1d\uacc4</th></tr>");c(e).append("<tr>\t<td>"+k+"\uc77c</td><td>"+n+"</td><td>"+t+"</td><td>"+q+"</td></tr>");c(e).append("<tr><th>\ub2e8\uc704</th><th>+\ud3c9\uade0</th><th>-\ud3c9\uade0</th><th>\ud3c9\uade0</th></tr>");c(e).append("<tr>\t<td>\uc77c</td><td>"+g+"</td><td>"+h+"</td><td>"+r+"</td></tr>");p.graphDrawBar(d,b.Graph.Sum,a.DVal.GraphHeight);break;
case a.ajaxMode.ListSumMonth:e=c(b.Table.Sum).find("tbody");e.empty();c(e).append("<tr><th>\ub0a0\uc9dc</th><th>\uc218\uc775</th><th>\uc9c0\ucd9c</th><th>\uacc4</th></tr>");d.map(function(a){c(e).append("<tr>\t<td>"+a.budget_month+"</td><td>"+a.income_sum+"</td><td>"+a.expense_sum+"</td><td>"+(Number(a.income_sum)-Number(a.expense_sum))+"</td>\t</tr>")});n=d.filter(function(a,b){return 0<b&&13>b}).reduce(function(a,b){return a+ +b.income_sum},0);t=d.filter(function(a,b){return 0<b&&13>b}).reduce(function(a,
b){return a+ +b.expense_sum},0);g=Math.round(1/12*n);h=Math.round(1/12*t);q=n-t;r=g-h;c(e).append("<tr><th>\uc6d4\uacc4</th><th>\ucd1d\uc775</th><th>\ucd1d\uc2e4</th><th>\ucd1d\uacc4</th></tr>");c(e).append("<tr>\t<td>12\uac1c\uc6d4</td><td>"+n+"</td><td>"+t+"</td><td>"+q+"</td></tr>");c(e).append("<tr><th>\ub2e8\uc704</th><th>+\ud3c9\uade0</th><th>-\ud3c9\uade0</th><th>\ud3c9\uade0</th></tr>");c(e).append("<tr>\t<td>\uc6d4</td><td>"+g+"</td><td>"+h+"</td><td>"+r+"</td></tr>");p.graphDrawBar(d,b.Graph.Sum,
a.DVal.GraphHeight);break;case a.ajaxMode.ListSumYear:e=c(b.Table.Sum).find("tbody");e.empty();c(e).append("<tr><th>\ub0a0\uc9dc</th><th>\uc218\uc775</th><th>\uc9c0\ucd9c</th><th>\uacc4</th></tr>");d.map(function(a){c(e).append("<tr>\t<td>"+a.budget_year+"</td><td>"+a.income_sum+"</td><td>"+a.expense_sum+"</td><td>"+(Number(a.income_sum)-Number(a.expense_sum))+"</td>\t</tr>")});n=d.filter(function(a,b){return 0<b&&6>b}).reduce(function(a,b){return a+ +b.income_sum},0);t=d.filter(function(a,b){return 0<
b&&6>b}).reduce(function(a,b){return a+ +b.expense_sum},0);g=Math.round(.2*n);h=Math.round(.2*t);q=n-t;r=g-h;c(e).append("<tr><th>\ub144\uacc4</th><th>\ucd1d\uc775</th><th>\ucd1d\uc2e4</th><th>\ucd1d\uacc4</th></tr>");c(e).append("<tr>\t<td>5\uac1c\ub144</td><td>"+n+"</td><td>"+t+"</td><td>"+q+"</td></tr>");c(e).append("<tr><th>\ub2e8\uc704</th><th>+\ud3c9\uade0</th><th>-\ud3c9\uade0</th><th>\ud3c9\uade0</th></tr>");c(e).append("<tr>\t<td>\uc5f0</td><td>"+g+"</td><td>"+h+"</td><td>"+r+"</td></tr>");
p.graphDrawBar(d,b.Graph.Sum,a.DVal.GraphHeight);break;case a.ajaxMode.ListViewCategory:e=c(b.Select.StatCategory);e.empty();c(e).append('<option\tvalue="'+a.DVal.StatAllCateValue+'" >\ud1b5\ud569</option>');d.map(function(a){c(e).append('<option value="'+a.category_name+'" >'+a.category_name+"</option>")});if(a.DVal.ClickStatButton===b.ButtonStat.MonthIncome||a.DVal.ClickStatButton===b.ButtonStat.YearIncome)a.DVal.IncomeCategoryLen=d.length;if(a.DVal.ClickStatButton===b.ButtonStat.MonthExpense||
a.DVal.ClickStatButton===b.ButtonStat.YearExpense)a.DVal.ExpenseCategoryLen=d.length;break;case a.ajaxMode.ListStatMonthIncome:e=c(b.Table.Stat).find("tbody");e.empty();a.DVal.StatAJAXkeepValue=d;c(e).append("<tr><th>\uc5f0\uc6d4</th><th>\uae08\uc561</th><th></th></tr>");n=d.length/a.DVal.IncomeCategoryLen;for(var l=0;l<n;l++)k=d.filter(function(a){return a.budget_month===d[l].budget_month}).reduce(function(a,b){return a+b.income_sum},0),c(e).append("<tr>\t<td>"+d[l].budget_month+"</td><td>"+k+'</td><td><button  class="'+
a.Button.StatDetailNodeClassName+'" value="'+d[l].budget_month+'">\uc138\ubd80</button></td>\t</tr>');p.graphDrawBar2(d,b.Graph.Stat,a.DVal.GraphHeight);c(a.Button.StatDetailNodeClass).click(function(){v(c(this))});break;case a.ajaxMode.ListStatMonthExpense:e=c(b.Table.Stat).find("tbody");e.empty();a.DVal.StatAJAXkeepValue=d;c(e).append("<tr><th>\uc5f0\uc6d4</th><th>\uae08\uc561</th><th></th></tr>");n=d.length/a.DVal.ExpenseCategoryLen;for(l=0;l<n;l++)k=d.filter(function(a){return a.budget_month===
d[l].budget_month}).reduce(function(a,b){return a+b.expense_sum},0),c(e).append("<tr>\t<td>"+d[l].budget_month+"</td><td>"+k+'</td><td><button  class="'+a.Button.StatDetailNodeClassName+'" value="'+d[l].budget_month+'">\uc138\ubd80</button></td>\t</tr>');p.graphDrawBar2(d,b.Graph.Stat,a.DVal.GraphHeight);c(a.Button.StatDetailNodeClass).click(function(){v(c(this))});break;case a.ajaxMode.ListStatYearIncome:e=c(b.Table.Stat).find("tbody");e.empty();a.DVal.StatAJAXkeepValue=d;c(e).append("<tr><th>\uc5f0</th><th>\uae08\uc561</th><th></th></tr>");
n=d.length/a.DVal.IncomeCategoryLen;for(l=0;l<n;l++)k=d.filter(function(a){return a.budget_year===d[l].budget_year}).reduce(function(a,b){return a+b.income_sum},0),c(e).append("<tr>\t<td>"+d[l].budget_year+"</td><td>"+k+'</td><td><button  class="'+a.Button.StatDetailNodeClassName+'" value="'+d[l].budget_year+'">\uc138\ubd80</button></td>\t</tr>');p.graphDrawBar2(d,b.Graph.Stat,a.DVal.GraphHeight);c(a.Button.StatDetailNodeClass).click(function(){v(c(this))});break;case a.ajaxMode.ListStatYearExpense:e=
c(b.Table.Stat).find("tbody");e.empty();a.DVal.StatAJAXkeepValue=d;c(e).append("<tr><th>\uc5f0</th><th>\uae08\uc561</th><th></th></tr>");n=d.length/a.DVal.ExpenseCategoryLen;for(l=0;l<n;l++)k=d.filter(function(a){return a.budget_year===d[l].budget_year}).reduce(function(a,b){return a+b.expense_sum},0),c(e).append("<tr>\t<td>"+d[l].budget_year+"</td><td>"+k+'</td><td><button  class="'+a.Button.StatDetailNodeClassName+'" value="'+d[l].budget_year+'">\uc138\ubd80</button></td>\t</tr>');p.graphDrawBar2(d,
b.Graph.Stat,a.DVal.GraphHeight);c(a.Button.StatDetailNodeClass).click(function(){v(c(this))});break;case a.ajaxMode.ListStatMonthIncomeDetail:p.graphDrawPie(d,b.Graph.Modal,a.DVal.GraphHeight);break;case a.ajaxMode.ListStatMonthExpenseDetail:p.graphDrawPie(d,b.Graph.Modal,a.DVal.GraphHeight);break;case a.ajaxMode.ListStatYearIncomeDetail:p.graphDrawPie(d,b.Graph.Modal,a.DVal.GraphHeight);break;case a.ajaxMode.ListStatYearExpenseDetail:p.graphDrawPie(d,b.Graph.Modal,a.DVal.GraphHeight);break;case a.ajaxMode.ListSetAccount:e=
c(b.Table.SetAccount).find("tbody");e.empty();c(e).append("<tr><th>\ucf54\ub4dc</th><th>\uacc4\uc88c</th><th>\uc794\uc561</th></tr>");c.each(d,function(a){c(e).append("<tr>\t<td>"+d[a].account_id+"</td><td>"+d[a].account_name+"</td><td>"+d[a].account_value+"</td>\t</tr>")});k=d.reduce(function(a,b){return a+b.account_value},0);c(e).append("<tr><th></th><th>\uacc4\uc88c \ucd1d \ud569\uacc4</th><th>"+k+"</th></tr>");break;case a.ajaxMode.ListSetTax:window.history.back();e=c(b.Table.SetTax).find("tbody");
e.empty();c(e).append("<tr><th>\uc5f0</th><th>\uacc4\uc88c</th><th>\uae08\uc561</th><th>\uc870\ud68c</th></tr>");c.each(d,function(b){c(e).append("<tr>\t<td>"+d[b].budget_year+"</td><td>"+d[b].account_name+"</td><td>"+d[b].expense_sum+'</td>\t<td><button  class="'+a.Button.TaxDetailNodeClassName+'" value="'+d[b].account_id+'" valueyear="'+d[b].budget_year+'">\uc870\ud68c</button></td> </tr>')});c(a.Button.TaxDetailNodeClass).click(function(){v(c(this))});break;case a.ajaxMode.ListSetTaxDetail:e=c(b.Table.SetTaxdetail).find("tbody");
e.empty();c(e).append("<tr><th>\uc5f0</th><th>\uacc4\uc88c</th><th>\ud56d\ubaa9</th><th>\uae08\uc561</th></tr>");c.each(d,function(a){c(e).append("<tr>\t<td>"+d[a].budget_date+"</td><td>"+d[a].account_name+"</td><td>"+d[a].category_name+"</td><td>"+d[a].expense_value+"</td>\t</tr>")});break;case a.ajaxMode.UpdateDayIncome:window.history.back();m(b.ButtonDay.Search);break;case a.ajaxMode.UpdateDayExpense:window.history.back();m(b.ButtonDay.Search);break;case a.ajaxMode.UpdateDayTransfer:window.history.back();
m(b.ButtonDay.Search);break;case a.ajaxMode.UpdateSetAccount:window.history.back(),m(b.ButtonSet.Account)}}function z(f){switch(f.attr("class")){case a.Button.DayIncomeDelNodeClassName:f={RQ:a.ajaxMode.DeleteDayIncome,ID:c(f).val()};g(a.ajaxLink.Delete,f,b.ButtonDay.Search,m);break;case a.Button.DayExpenseDelNodeClassName:f={RQ:a.ajaxMode.DeleteDayExpense,ID:c(f).val()},g(a.ajaxLink.Delete,f,b.ButtonDay.Search,m)}}function v(f){switch(f.attr("class")){case a.Button.TaxDetailNodeClassName:var d={RQ:a.ajaxMode.ListSetTaxDetail,
ACCOUNT:c(f).val(),VALUE:f.attr("valueyear")};g(a.ajaxLink.Select,d,a.ajaxMode.ListSetTaxDetail,h);break;case a.Button.StatDetailNodeClassName:a.DVal.ClickStatButton===b.ButtonStat.MonthIncome&&(d={RQ:a.ajaxMode.ListStatMonthIncomeDetail,VALUE:c(f).val()},g(a.ajaxLink.Select,d,a.ajaxMode.ListStatMonthIncomeDetail,h)),a.DVal.ClickStatButton===b.ButtonStat.MonthExpense&&(d={RQ:a.ajaxMode.ListStatMonthExpenseDetail,VALUE:c(f).val()},g(a.ajaxLink.Select,d,a.ajaxMode.ListStatMonthExpenseDetail,h)),a.DVal.ClickStatButton===
b.ButtonStat.YearIncome&&(d={RQ:a.ajaxMode.ListStatYearIncomeDetail,VALUE:c(f).val()},g(a.ajaxLink.Select,d,a.ajaxMode.ListStatYearIncomeDetail,h)),a.DVal.ClickStatButton===b.ButtonStat.YearExpense&&(d={RQ:a.ajaxMode.ListStatYearExpenseDetail,VALUE:c(f).val()},g(a.ajaxLink.Select,d,a.ajaxMode.ListStatYearExpenseDetail,h)),r(b.Modal.ModalSubmitStatDetail,f)}}function B(f){var d;a.DVal.StatSelCateValue=c(b.Select.StatCategory).val();a.DVal.StatSelCateValue!==a.DVal.StatAllCateValue?d=a.DVal.StatAJAXkeepValue.filter(function(b){return b.category_name===
a.DVal.StatSelCateValue}):m(f);var k=c(b.Table.Stat).find("tbody");k.empty();switch(f){case b.ButtonStat.MonthIncome:c(k).append("<tr><th>\uc5f0\uc6d4</th><th>\uae08\uc561</th></tr>");var g=Math.round(1*d.filter(function(a,b){return 0<b&&13>b}).reduce(function(a,b){return a+b.income_sum},0)/12);d.map(function(a){c(k).append("<tr>\t<td>"+a.budget_month+"</td><td>"+a.income_sum+"</td> </tr>")});break;case b.ButtonStat.MonthExpense:c(k).append("<tr><th>\uc5f0\uc6d4</th><th>\uae08\uc561</th></tr>");g=
Math.round(1*d.filter(function(a,b){return 0<b&&13>b}).reduce(function(a,b){return a+b.expense_sum},0)/12);d.map(function(a){c(k).append("<tr>\t<td>"+a.budget_month+"</td><td>"+a.expense_sum+"</td> </tr>")});break;case b.ButtonStat.YearIncome:c(k).append("<tr><th>\uc5f0</th><th>\uae08\uc561</th></tr>");g=Math.round(1*d.filter(function(a,b){return 0<b&&13>b}).reduce(function(a,b){return a+b.income_sum},0)/12);d.map(function(a){c(k).append("<tr>\t<td>"+a.budget_year+"</td><td>"+a.income_sum+"</td> </tr>")});
break;case b.ButtonStat.YearExpense:c(k).append("<tr><th>\uc5f0</th><th>\uae08\uc561</th></tr>"),g=Math.round(1*d.filter(function(a,b){return 0<b&&13>b}).reduce(function(a,b){return a+b.expense_sum},0)/12),d.map(function(a){c(k).append("<tr>\t<td>"+a.budget_year+"</td><td>"+a.expense_sum+"</td> </tr>")})}c(k).append("<tr><th>\ud3c9\uade0</th><th>"+g+"</th></tr>");p.graphDrawBar2(d,b.Graph.Stat,a.DVal.GraphHeight)}function u(a){switch(a){case b.ButtonModal.SubmitIncome:if(!c(b.Input.ModalIncomeQt).val())return c(b.Input.ModalIncomeQt).attr("placeholder",
"\uc785\ub825\ud574\uc8fc\uc138\uc694"),c(b.Input.ModalIncomeQt).focus(),!1;a=w(c(b.Input.ModalIncomeQt).val(),q.OnlyNumber);c(b.Input.ModalIncomeQt).val(a);return!0;case b.ButtonModal.SubmitExpense:if(!c(b.Input.ModalExpenseQt).val())return c(b.Input.ModalExpenseQt).attr("placeholder","\uc785\ub825\ud574\uc8fc\uc138\uc694"),c(b.Input.ModalExpenseQt).focus(),!1;a=w(c(b.Input.ModalExpenseQt).val(),q.OnlyNumber);c(b.Input.ModalExpenseQt).val(a);return!0;case b.ButtonModal.SubmitTransfer:if(!c(b.Input.ModalTransferQt).val())return c(b.Input.ModalTransferQt).attr("placeholder",
"\uc785\ub825\ud574\uc8fc\uc138\uc694"),c(b.Input.ModalTransferQt).focus(),!1;a=w(c(b.Input.ModalTransferQt).val(),q.OnlyNumber);c(b.Input.ModalTransferQt).val(a);return!0;case b.ButtonModal.SubmitAccount:if(!c(b.Input.ModalAccountQt).val())return c(b.Input.ModalAccountQt).attr("placeholder","\uc785\ub825\ud574\uc8fc\uc138\uc694"),c(b.Input.ModalAccountQt).focus(),!1;a=w(c(b.Input.ModalAccountQt).val(),q.OnlyChar);c(b.Input.ModalAccountQt).val(a);return!0;case b.ButtonModal.SubmitTax:if(!c(b.Input.ModalTaxQt).val())return c(b.Input.ModalTaxQt).attr("placeholder",
"\uc785\ub825\ud574\uc8fc\uc138\uc694"),c(b.Input.ModalTaxQt).focus(),!1;a=w(c(b.Input.ModalTaxQt).val(),q.OnlyNumber);c(b.Input.ModalTaxQt).val(a);return!0}}function x(f,d){var k=[];switch(f){case b.Graph.Sum:k=[["\uae30\uac04","\ubcc0\ub3d9"]];c.each(d,function(){switch(a.DVal.ClickSumButton){case b.ButtonSum.Day:item=[this.budget_date,parseInt(this.income_sum)-parseInt(this.expense_sum)];break;case b.ButtonSum.Month:item=[this.budget_month,parseInt(this.income_sum)-parseInt(this.expense_sum)];
break;case b.ButtonSum.Year:item=[this.budget_year,parseInt(this.income_sum)-parseInt(this.expense_sum)]}k.push(item)});break;case b.Graph.Stat:switch(a.DVal.ClickStatButton){case b.ButtonStat.MonthIncome:var g=Array.from(new Set(d.map(function(a){return a.category_name}))),e=Array.from(new Set(d.map(function(a){return a.budget_month})));k.push(["\uc6d4"].concat(g));e.map(function(a){k.push([a].concat(d.filter(function(b){return b.budget_month===a}).map(function(a){return a.income_sum})))});break;
case b.ButtonStat.MonthExpense:g=Array.from(new Set(d.map(function(a){return a.category_name})));e=Array.from(new Set(d.map(function(a){return a.budget_month})));k.push(["\uc6d4"].concat(g));e.map(function(a){k.push([a].concat(d.filter(function(b){return b.budget_month===a}).map(function(a){return a.expense_sum})))});break;case b.ButtonStat.YearIncome:g=Array.from(new Set(d.map(function(a){return a.category_name})));e=Array.from(new Set(d.map(function(a){return a.budget_year})));k.push(["\uc5f0"].concat(g));
e.map(function(a){k.push([a].concat(d.filter(function(b){return b.budget_year===a}).map(function(a){return a.income_sum})))});break;case b.ButtonStat.YearExpense:g=Array.from(new Set(d.map(function(a){return a.category_name}))),e=Array.from(new Set(d.map(function(a){return a.budget_year}))),k.push(["\uc5f0"].concat(g)),e.map(function(a){k.push([a].concat(d.filter(function(b){return b.budget_year===a}).map(function(a){return a.expense_sum})))})}break;case b.Graph.Modal:k=[["\ud56d\ubaa9","\uae08\uc561"]],
c.each(d,function(){var a;this.hasOwnProperty("income_sum")&&(a=[this.category_name,parseInt(this.income_sum)]);this.hasOwnProperty("expense_sum")&&(a=[this.category_name,parseInt(this.expense_sum)]);k.push(a)})}return k}function g(a,b,g,h){c.ajax({url:a,type:"POST",data:b,beforeSend:function(a){a.overrideMimeType&&a.overrideMimeType("application/json")},dataType:"json",scriptCharParam:"utf-8",error:function(a,b,c){}}).done(function(a){return h(g,a)}).fail(function(){console.log("\uc1a1\uc218\uc2e0 \uc2e4\ud328");
window.location="/Budget/Login"})}function w(a,b){switch(b){case q.OnlyChar:var c=/[^(\uac00-\ud7a3\u3131-\u314e\u314f-\u3163a-zA-Z0-9)]/gi;break;case q.OutSpecial:c=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@#$%&\\=\('"]/gi;break;case q.OnlyNumber:c=/[^\d\.]/g}c.test(a)&&(a=a.replace(c,""));return a}google.charts.load("current",{packages:["corechart"]});google.charts.setOnLoadCallback(p.graphDraw);var a={ajaxLink:{Select:"/Budget/Select",Update:"/Budget/Update",Delete:"/Budget/Delete"},ajaxMode:{ListDayIncome:"LIST_INCOME",
ListDayExpense:"LIST_EXPENSE",ListSumDay:"LIST_SUMDAY",ListSumMonth:"LIST_SUMMONTH",ListSumYear:"LIST_SUMYEAR",ListStatMonthIncome:"LIST_MONTHINCOME",ListStatMonthIncomeDetail:"LIST_MONTHINCOME_DETAIL",ListStatYearIncome:"LIST_YEARINCOME",ListStatYearIncomeDetail:"LIST_YEARINCOME_DETAIL",ListStatMonthExpense:"LIST_MONTHEXPENSE",ListStatMonthExpenseDetail:"LIST_MONTHEXPENSE_DETAIL",ListStatYearExpense:"LIST_YEAREXPENSE",ListStatYearExpenseDetail:"LIST_YEAREXPENSE_DETAIL",ListSetAccount:"LIST_USERACCOUNT",
ListSetTax:"LIST_STATTAX",ListSetTaxDetail:"LIST_STATTAXDETAIL",UpdateDayIncome:"UPDATE_INCOME",UpdateDayExpense:"UPDATE_EXPENSE",UpdateDayTransfer:"UPDATE_TRANSFER",UpdateSetAccount:"UPDATE_ACCOUNT",DeleteDayIncome:"DELETE_INCOME",DeleteDayExpense:"DELETE_EXPENSE",ListModalCategory:"LIST_CATEGORY",ListModalAccount:"LIST_ACCOUNT",ListViewCategory:"LIST_VIEW_CATEGORY"},ajaxVal:{Day:"DAY",AccountID:"ACCOUNT-ID",CategoryID:"CATEGORY-ID",Value:"QT",Income:"INCOME",Expense:"EXPENSE"},DVal:{GraphHeight:900,
IncomeCategoryLen:8,ExpenseCategoryLen:12,ClickDayButton:"",ClickDayValue:"",ClickSumButton:"",ClickSumValue:"",ClickStatButton:"",ClickStatValue:"",ClickSetButton:"",ClickSetValue:"",StatAllCateValue:"all",StatSelCateValue:"all",StatAJAXkeepValue:""},Button:{DayIncomeDelNodeClass:".delete.button.day.income",DayIncomeDelNodeClassName:"delete button day income",DayExpenseDelNodeClass:".delete.button.day.expense",DayExpenseDelNodeClassName:"delete button day expense",StatDetailNodeClass:".list.button.statdetail",
StatDetailNodeClassName:"list button statdetail",TaxDetailNodeClass:".list.button.set.taxdetail",TaxDetailNodeClassName:"list button set taxdetail"}},b={Div:{SetAccount:".set.account",SetTax:".set.tax"},Modal:{ModalSubmitIncome:"#modal-submit-income",ModalSubmitExpense:"#modal-submit-expense",ModalSubmitTransfer:"#modal-submit-transfer",ModalSubmitStatDetail:"#modal-submit-stat-detail",ModalSubmitAccount:"#modal-submit-account",ModalSubmitTax:"#modal-submit-tax"},Button:{cancel:".cancel"},ButtonDay:{Search:"#button-day-search",
Income:"#button-day-income",Expense:"#button-day-expense",Transfer:"#button-day-transfer"},ButtonSum:{Day:"#button-sum-day",Month:"#button-sum-month",Year:"#button-sum-year"},ButtonStat:{MonthIncome:"#button-stat-month-income",MonthExpense:"#button-stat-month-expense",YearIncome:"#button-stat-year-income",YearExpense:"#button-stat-year-expense"},ButtonSet:{Account:"#button-set-account",Tax:"#button-set-tax",TaxLet:"#button-set-tax-ret"},ButtonModal:{SubmitIncome:"#button-submit-income",SubmitExpense:"#button-submit-expense",
SubmitTransfer:"#button-submit-transfer",SubmitAccount:"#button-submit-account",SubmitTax:"#button-submit-tax"},Input:{DayDay:"#input-day-datepicker",ModalIncomeDay:"#input-submit-income-datepicker",ModalIncomeCategory:"#select-submit-income-category",ModalIncomeAccount:"#select-submit-income-account",ModalIncomeQt:"#input-submit-income-qt",ModalExpenseDay:"#input-submit-expense-datepicker",ModalExpenseCategory:"#select-submit-expense-category",ModalExpenseAccount:"#select-submit-expense-account",
ModalExpenseQt:"#input-submit-expense-qt",ModalTransferDay:"#input-submit-transfer-datepicker",ModalTransferAccountFrom:"#select-submit-transfer-account-from",ModalTransferAccountTo:"#select-submit-transfer-account-to",ModalTransferQt:"#input-submit-transfer-qt",ModalAccountQt:"#input-submit-account-qt",ModalTaxQt:"#input-submit-tax-qt"},Table:{DayIncome:"#table-day-income",DayExpense:"#table-day-expense",Sum:"#table-sum",Stat:"#table-stat",SetAccount:"#table-set-account",SetTax:"#table-set-tax",
SetTaxdetail:"#table-set-tax-detail"},Graph:{Sum:"#sum-graph-dayNmonth",Stat:"#stat-graph-stat",Modal:"#modal-graph-stat-detail"},Select:{ModalIncomeAccount:"#select-submit-income-account",ModalIncomeCategory:"#select-submit-income-category",ModalExpenseAccount:"#select-submit-expense-account",ModalExpenseCategory:"#select-submit-expense-category",ModalTransferAccountFrom:"#select-submit-transfer-account-from",ModalTransferAccountTo:"#select-submit-transfer-account-to",StatCategory:"#select-statview-category"}},
q={OnlyNumber:"1",OnlyChar:"2",OutSpecial:"3"};p.graphDrawBar=function(a,b,c){a=x(b,a);a=google.visualization.arrayToDataTable(a);(new google.visualization.BarChart(document.getElementById(b.replace("#","")))).draw(a,{title:"",chartArea:{top:20,width:"70%",height:"90%"},hAxis:{minValue:0}})};p.graphDrawBar2=function(a,b,c){a=x(b,a);a=google.visualization.arrayToDataTable(a);(new google.visualization.BarChart(document.getElementById(b.replace("#","")))).draw(a,{title:"",chartArea:{top:20,width:"70%",
height:"90%"},hAxis:{minValue:0},isStacked:!0})};p.graphDrawPie=function(a,b,c){a=x(b,a);a=google.visualization.arrayToDataTable(a);(new google.visualization.PieChart(document.getElementById(b.replace("#","")))).draw(a,{title:"",legend:"none",chartArea:{width:"90%",height:"90%"},hAxis:{minValue:0}})};p.run=function(){m(b.ButtonDay.Income);m(b.ButtonDay.Expense);A()};return p}(window.SipuBudget||{},$);SipuBudget.run();